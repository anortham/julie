---
git:
  branch: main
  commit: 7297133
  dirty: true
  files_changed:
  - .memories/plans/plan_replace-fts5-with-tantivy-codetokenizer.json
  - crates/julie-extractors/src/factory.rs
  - crates/julie-extractors/src/gdscript/mod.rs
  - crates/julie-extractors/src/manager.rs
  - crates/julie-extractors/src/ruby/mod.rs
  - crates/julie-extractors/src/tests/gdscript/mod.rs
  - crates/julie-extractors/src/tests/ruby/mod.rs
  - src/search/index.rs
  - src/search/query.rs
  - src/tests/integration/watcher.rs
  - src/tests/integration/watcher_handlers.rs
  - src/tests/mod.rs
  - src/tests/tools/search/tantivy_index_tests.rs
  - src/tools/workspace/indexing/mod.rs
  - src/tools/workspace/indexing/processor.rs
  - src/tools/workspace/mod.rs
  - src/watcher/handlers.rs
  - src/watcher/mod.rs
  - src/workspace/mod.rs
id: observation_69854d2f_e912de
tags:
- audit
- fast_search
- tantivy
- data-utilization
timestamp: 1770343727
type: observation
---

Completed fast_search audit - data utilization analysis

## Key Findings:

### 1. Data Flow (Tantivy post-migration)
- text_search_impl: queries via Tantivy SearchIndex (not SQLite)
- search_symbols: searches name, signature, doc_comment, code_body fields
- search_content: searches content field for file-level matches
- CodeTokenizer: CamelCase/snake_case splitting, affix stripping at index time
- Query building: AND per term, OR across fields, with field boosting (name 5x > signature 3x > doc_comment 2x > code_body 1x)

### 2. Tantivy Capabilities Unused
- Fuzzy matching: NOT implemented (no FuzzyTermQuery)
- Phrase search: NOT implemented (no PhraseQuery)
- doc_comment field: indexed and searchable in symbol queries
- signature field: indexed and searchable 
- Highlighting/snippets: NOT implemented (no highlighting logic)
- Term vectors/match positions: indexed but not extracted

### 3. Database Data Sources Ignored
- identifiers table: NEVER queried by fast_search (created in schema but unused)
- relationships table: NEVER queried by fast_search (created in schema but unused)
- visibility field (Symbol struct): set to None in text_search.rs:95, never populated
- semantic_group field: populated in content search as "content_match", but NOT searched

### 4. search_method Parameter (post-Tantivy)
- "text", "semantic", "hybrid", "auto" all routed to same Tantivy text search
- Lines 162-168 in mod.rs: semantic/hybrid methods logged but converted to text
- No actual semantic/hybrid logic exists (removed during Tantivy migration)
- This is a DEAD CODE path from embedding era

### 5. Query Preprocessor
- validate_query: rejects pure wildcards only
- detect_query_type: classifies query (Symbol/Pattern/Glob/Standard)
- sanitize_query: removes leading wildcards
- STILL RELEVANT but routing is basic - no advanced query understanding

## Unused Capabilities Inventory:
- identifiers table (100% unused in search path)
- relationships table (100% unused in search path)  
- visibility field (always None)
- confidence scores (only populated from Tantivy score)
- semantic_group (only used for content_match label)
- fuzzy matching (capability exists in Tantivy, not wired)
- phrase queries (capability exists in Tantivy, not wired)
- highlighting/snippets (not implemented)
