---
git:
  branch: main
  commit: 08679c9
  dirty: true
  files_changed:
  - TODO.md
  - crates/julie-extractors/src/css/animations.rs
id: learning_69880298_9904ec
tags:
- parallel-agents
- lesson
- coordination
- build-conflicts
timestamp: 1770521240
type: learning
---

## Parallel Agent Anti-Pattern: Shared Crate Conflicts

### Problem
When 10 agents edit files in the same Rust crate (`julie-extractors`) simultaneously:
- `cargo test` compiles the **entire crate**, not just the agent's files
- If Agent A has half-finished changes that break compilation, Agent B's `cargo test` fails
- Agent B then wastes time debugging errors that aren't theirs
- The SQL+Regex agent reported its edits being "reverted" — likely compile failures from other agents' in-progress work
- Scripting agent had to patch C++ `mod.rs` to fix another agent's uncommitted module declarations

### Better Instructions for Future Parallel Agents
1. **Complete ALL code changes before running any tests** — don't test incrementally
2. **Use `cargo check` first** — faster than `cargo test`, catches compile errors
3. **If you see compile errors in files you didn't edit, DON'T fix them** — another agent owns those files
4. **Never edit files outside your assigned extractor directories** — even if they appear broken
5. **Run tests with `--no-fail-fast` and filter to your language** — don't run the full test suite
6. **If tests fail due to other agents' changes, document what you changed and move on**

### Ideal Approach
- Give each agent an exclusive list of files they may edit
- Instruct them to batch all changes, then test once at the end
- Have a final "integration" agent that runs the full test suite after all agents complete
